---
title: Teleport Access Requests with Jira
description: How to set up the Teleport Jira plugin to notify users when another user requests elevated privileges.
---

This guide will explain how to setup Teleport with Jira. Teleport's Jira
integration allows you to treat Teleport access and permission requests using
Jira tickets.

{/* TODO: Edit this explanation if I need to after updating the rest of the
guide*/}

## Prerequisites

(!/docs/pages/includes/commercial-prereqs-tabs.mdx!)

- A Jira account with owner privileges that enable you to set up webhooks, issue
  types, and workflows. {/* TODO: See what the minimum requirements are now*/}

(!/docs/pages/includes/tctl.mdx!)

## Step 1/7. Define RBAC resources

Before you set up the Jira plugin, you will need to enable Role Access Requests
in your Teleport cluster.

(!/docs/pages/includes/plugins/editor-request-rbac.mdx!)

## Step 2/7. Install the Teleport Jira plugin

<ScopedBlock scope={["enterprise", "oss"]}>

We recommend installing Teleport plugins on the same host as the Teleport Proxy
Service. This is an ideal location as plugins have a low memory footprint, and
will require both public internet access and Teleport Auth Service access. 

</ScopedBlock>
<ScopedBlock scope="cloud">

Install the Teleport Jira plugin on a host that can access both your Teleport
Cloud tenant and Jira.

</ScopedBlock>

<Tabs>
<TabItem label="Download">
  ```code
  $ curl -L -O https://get.gravitational.com/teleport-access-jira-v(=teleport.plugin.version=)-linux-amd64-bin.tar.gz
  $ tar -xzf teleport-access-jira-v(=teleport.plugin.version=)-linux-amd64-bin.tar.gz
  $ cd teleport-access-jira
  $ ./install
  ```
</TabItem>
<TabItem label="From Source">
  To install from source you need `git` and `go` installed. If you do not have Go installed, visit the Go [downloads page](https://go.dev/dl/).

  ```code
  # Checkout teleport-plugins
  $ git clone https://github.com/gravitational/teleport-plugins.git
  $ cd teleport-plugins/access/jira
  $ make
  ```
Run `./install` from `teleport-jira` or place the executable in `/usr/bin` or `/usr/local/bin` on the server installation.
</TabItem>
<TabItem label="Docker">
  ```code
  $ docker pull public.ecr.aws/gravitational/teleport-plugin-jira:(=teleport.plugin.version=)
  ```
</TabItem>
<TabItem label="Helm Chart">
  (!docs/pages/kubernetes-access/helm/includes/helm-repo-add.mdx!)
</TabItem>
</Tabs>

{/* TODO: Add instructions to verify that the installation works*/}

## Step 3/7. Create a user and role for the plugin

(!docs/pages/includes/plugins/rbac.mdx!)

## Step 4/7. Export the access plugin identity

(!docs/pages/includes/plugins/identity-export.mdx!)

## Step 5/7. Set up a Jira project

{/* TODO: Make sure this section is still accurate*/}

### Create a permission management project

All new permission requests are going to show up in a project you choose. We
recommend that you create a separate project for permissions management, and a
new board in said project.

You'll need the project Jira key to configure the plugin.

### Set up a status board

Create a new board for tasks in the permission management project. The board has
to have at least these three columns:

1. Pending
2. Approved
3. Denied

Teleport's Jira plugin will create a new issue for each new permission request
in the first available column on the board. When you drag the request task to
the Approved column in Jira, the request will be approved. If you drag the
request task to the Denied column in Jira, the request will be denied.

### Set up a request ID field on Jira

The Teleport Jira plugin requires a custom issue field to be created.

Go to your Jira Project settings → Issue Types → Select type `Task` → add a new
Short Text field named `TeleportAccessRequestId`.

Teleport uses this field to reference its internal request ID. If anyone changes
this field on Jira, or tries to forge the permission request, Teleport will
validate it and ignore it.

### Retrieve your Jira API token

If you're using Jira Cloud, navigate to [Account Settings → Security → API
Tokens](https://id.atlassian.com/manage-profile/security/api-tokens) and create
a new app specific API token in your Jira installation. You'll need this token
later to configure the plugin.

For Jira Server, the URL of the API tokens page will be different depending on
your installation.

### Set up Jira webhooks

Go to Settings → General → System → Webhooks and create a new webhook for Jira
to tell the Teleport plugin about updates.

For the webhook URL, use the URL that you'll run the plugin on. It needs to be a
publicly accessible URL (we will show you how to set this up later). Jira
requires the webhook listener to run over HTTPS.

The webhook needs to be notified only about new issues being created, issues
being updated, or deleted. You can leave all the other boxes empty.

<Admonition
  type="note"
  title="Plugin Defaults"
>

  Jira will send updates about any issues in any projects in your Jira
  installation to the webhook. We suggest that you use JQL filters to limit
  which issues are being sent to the plugin.

  The plugin's web server will run with TLS, but you can disable it with
  `--insecure-no-tls` to test things out in a dev environment.

</Admonition>

In the webhook settings page, make sure that the webhook will only send Issue
Updated updates. It's not critical if anything else gets sent, since the plugin
will just ignore everything else.

## Step 5/7. Configure the plugin

At this point, you have generated credentials that the Jira plugin will use to
connect to Teleport. You will now configure the plugin to use these credentials
to receive Access Request notifications from Teleport and post them to your Jira
project.

The Teleport email plugin uses a config file in TOML format. Generate a
boilerplate config by running the following command:

```code
$ teleport-jira configure > teleport-jira.toml
$ sudo mv teleport-jira.toml /etc
```

Edit the configuration file for your environment. We will show you how to set
each value below.

{/* TODO: check the current config settings and plan changes to the rest of thi
section */}

### `[teleport]`

<Tabs>
<TabItem label="Teleport Enterprise" scope={["oss", "enterprise"]}>

**`addr`**: Include the hostname and HTTPS port of your Teleport Proxy Service
(e.g., `mytenant.teleport.sh:443`). If you are configuring your plugin to
connect directly to the Teleport Auth Service, use your Auth Service's gRPC
endpoint (e.g., `teleport.example.com:3025`).

**`identity`**, **`client_key`**, **`client_crt`**, **`root_cas`**: The values
you will use for these fields depend on whether the email plugin will
connect to the Proxy Service or the Auth Service. 

If you exported an identity file earlier, fill in the `identity` field with the
path to the file and comment out the other fields.

If you exported a client key, client certificate, and root CAs earlier, fill in
the `client_key`, `client_crt`, and `root_cas` fields with the paths to these
files and leave `identity` commented out.

### `[jira]`

The `[jira]` section requires a few things:

1. Your Jira Cloud or Jira Server URL. For Jira Cloud, it looks something like `yourcompany.atlassian.net`.
2. Your username on Jira, i.e. [ben@goteleport.com](mailto:ben@goteleport.com)
3. Your Jira API token that you've created above.
4. A Jira Project key, available in Project settings.

The `[http]` setting block describes how the plugin's HTTP server works. The HTTP server is responsible for listening for updates from Jira, and processing updates, like when someone drags a task from Inbox to Approved column.

You must provide an address the server should listen on, and a certificate to use. It's possible to
run the Jira plugin on the same server as the Teleport Proxy, so you can use the same TLS certificate.

</TabItem>
<TabItem label="Teleport Cloud" scope="cloud">

**`addr`**: Include the hostname and HTTPS port of your Teleport Cloud tenant
(e.g., `mytenant.teleport.sh:443`).

**`identity`**, **`client_key`**, **`client_crt`**, **`root_cas`**: Fill in the
`identity` field with the path to the identity file you exported earlier and
comment out the other fields.

</TabItem>
</Tabs>

The final configuration will resemble the following:

```toml
(!examples/resources/plugins/teleport-jira-self-hosted.toml!)
```
</TabItem>
<TabItem 
options="Helm Chart" 
label="Connect to the Proxy Service "
>

Create a file called `values.yaml` with the following content, which configures
the Helm chart for the plugin. It should resemble the following:

```yaml
(!examples/resources/plugins/teleport-jira-helm-cloud.yaml!)
```

Use the following command to create the Kubernetes secret referenced in the
values file from the identity file you generated earlier:

```console
kubectl create secret generic teleport-plugin-jira-identity --from-file=auth_id=auth.pem
```
</TabItem>
</Tabs>

## Step 6/6. Test the Jira plugin

After finishing your configuration, you can now run the plugin and test your
Jira-based Access Request flow:

<Tabs>
<TabItem label="Executable" scopes={["oss", "enterprise", "cloud"]}>
```code
$ teleport-jira start
```
</TabItem>
<TabItem label="Helm Chart" scopes={["oss", "enterprise", "cloud"]}>
```code
$ helm install teleport-plugin-jira teleport/teleport-plugin-jira \
  --values teleport-jira-helm.yaml \
  --version (=teleport.plugin.version=)
```
</TabItem>
</Tabs>

### Create an Access Request

(!docs/pages/includes/plugins/create-request.mdx!)

The recipients you configured earlier should receive notifications of the
request by email. 

### Resolve the request

(!docs/pages/includes/plugins/resolve-request.mdx!)

<Admonition title="Auditing Access Requests">

When the Jira plugin posts an Access Request notification to a project, anyone
with access to the project  can view the notification and follow the link. While
users must be authorized via their Teleport roles to review Access Requests, you
should still check the Teleport audit log to ensure that the right users are
reviewing the right requests.

When auditing Access Request reviews, check for events with the type `Access
Request Reviewed` in the Teleport Web UI <ScopedBlock scope={["oss",
"enterprise"]}>and `access_request.review` if reviewing the audit log on the
Auth Service host</ScopedBlock>.

## Step 7/7. Set up systemd

In production, we recommend starting the Teleport plugin daemon via an init
system like systemd. Here's the recommended Teleport plugin service unit file
for systemd:

```txt
(!examples/systemd/plugins/teleport-jira.service!)
```

Save this as `teleport-jira.service` or another [unit file load
path](https://www.freedesktop.org/software/systemd/man/systemd.unit.html#Unit%20File%20Load%20Path)
supported by systemd.

```code
$ sudo systemctl enable teleport-jira
$ sudo systemctl start teleport-jira
```

## Feedback

If you have any issues with this plugin, please create a GitHub issue in our
[`gravitational/teleport-plugins`](https://github.com/gravitational/teleport-plugins/issues/new)
repo.
